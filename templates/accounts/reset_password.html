{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% block title %}Đặt lại mật khẩu{% endblock %}
{% block content %}
<h2 class="text-center">Đặt lại mật khẩu</h2>
<div class="card p-4">
    <form method="post">
        {% csrf_token %}

        <div class="mb-3 position-relative">
            <label class="form-label">Mật khẩu mới</label>
            <input type="password" name="password" id="password" class="form-control" required placeholder="Nhập mật khẩu mới">
            <span class="toggle-password" toggle="#password">&#128065;</span>
        </div>

        <div class="mb-3 position-relative">
            <label class="form-label">Xác nhận mật khẩu</label>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control" required placeholder="Xác nhận mật khẩu mới">
            <span class="toggle-password" toggle="#confirm_password">&#128065;</span>
        </div>

        <div class="text-center mt-3">
            <button type="submit" class="btn btn-primary px-4">Đặt lại mật khẩu</button>
        </div>
    </form>
</div>

<style>
    .mb-3.position-relative {
    position: relative;
    }

    input.form-control {
    padding-right: 40px; /* tạo khoảng trống bên phải cho icon */
    }

    .toggle-password {
        padding-top: 30px;
        position: absolute;
        top: 50%;
        right: 12px;
        transform: translateY(-50%);
        cursor: pointer;
        font-size: 18px;
        user-select: none;
        color: #666;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.toggle-password').forEach(toggle => {
        toggle.addEventListener('click', () => {
            const input = document.querySelector(toggle.getAttribute('toggle'));
            if (input.type === 'password') {
                input.type = 'text';
                toggle.innerHTML = '&#128584;';  // biểu tượng che mắt
            } else {
                input.type = 'password';
                toggle.innerHTML = '&#128065;';  // biểu tượng mắt mở
            }
        });
    });
});
</script>
{% endblock %}
